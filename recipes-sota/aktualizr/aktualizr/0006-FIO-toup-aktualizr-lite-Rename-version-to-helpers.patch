From 323c6a4113e668b0d0bd7fc225f35da082199e64 Mon Sep 17 00:00:00 2001
From: Andy Doan <andy@foundries.io>
Date: Wed, 10 Jul 2019 18:38:46 -0500
Subject: [PATCH 06/12] [FIO toup] aktualizr-lite: Rename version* to helpers*

More stuff can be moved into a helpers file which will also allow
a bit more unit test coverage.

Signed-off-by: Andy Doan <andy@foundries.io>
---
 src/aktualizr_lite/CMakeLists.txt                       | 9 ++++++---
 src/aktualizr_lite/{version.h => helpers.h}             | 0
 src/aktualizr_lite/{version_test.cc => helpers_test.cc} | 2 +-
 src/aktualizr_lite/main.cc                              | 2 +-
 4 files changed, 8 insertions(+), 5 deletions(-)
 rename src/aktualizr_lite/{version.h => helpers.h} (100%)
 rename src/aktualizr_lite/{version_test.cc => helpers_test.cc} (97%)

diff --git a/src/aktualizr_lite/CMakeLists.txt b/src/aktualizr_lite/CMakeLists.txt
index 2d82d7b2..f6f42375 100644
--- a/src/aktualizr_lite/CMakeLists.txt
+++ b/src/aktualizr_lite/CMakeLists.txt
@@ -1,5 +1,8 @@
+set(AKTUALIZR_LITE_SRC main.cc)
+set(AKTUALIZR_LITE_HEADERS helpers.h)
+
 if(BUILD_OSTREE)
-add_executable(aktualizr-lite main.cc version.h)
+add_executable(aktualizr-lite ${AKTUALIZR_LITE_SRC})
 target_link_libraries(aktualizr-lite aktualizr_static_lib ${AKTUALIZR_EXTERNAL_LIBS})
 
 install(TARGETS aktualizr-lite RUNTIME DESTINATION bin COMPONENT aktualizr-lite)
@@ -19,7 +22,7 @@ add_library(t_lite-mock SHARED ostree_mock.cc)
 
 endif(BUILD_OSTREE)
 
-add_aktualizr_test(NAME lite-version SOURCES version_test.cc)
+add_aktualizr_test(NAME lite-helpers SOURCES helpers_test.cc)
 
-aktualizr_source_file_checks(main.cc version.h version_test.cc ostree_mock.cc)
+aktualizr_source_file_checks(main.cc ${AKTUALIZR_LITE_SRC} ${AKTUALIZR_LITE_HEADERS} helpers_test.cc ostree_mock.cc)
 # vim: set tabstop=4 shiftwidth=4 expandtab:
diff --git a/src/aktualizr_lite/version.h b/src/aktualizr_lite/helpers.h
similarity index 100%
rename from src/aktualizr_lite/version.h
rename to src/aktualizr_lite/helpers.h
diff --git a/src/aktualizr_lite/version_test.cc b/src/aktualizr_lite/helpers_test.cc
similarity index 97%
rename from src/aktualizr_lite/version_test.cc
rename to src/aktualizr_lite/helpers_test.cc
index 68ac2fb2..96020ec7 100644
--- a/src/aktualizr_lite/version_test.cc
+++ b/src/aktualizr_lite/helpers_test.cc
@@ -1,6 +1,6 @@
 #include <gtest/gtest.h>
 
-#include "version.h"
+#include "helpers.h"
 
 TEST(version, bad_versions) {
   ASSERT_TRUE(Version("bar") < Version("foo"));
diff --git a/src/aktualizr_lite/main.cc b/src/aktualizr_lite/main.cc
index 59faa2bf..868814d5 100644
--- a/src/aktualizr_lite/main.cc
+++ b/src/aktualizr_lite/main.cc
@@ -7,9 +7,9 @@
 #include <boost/uuid/uuid_io.hpp>
 
 #include "config/config.h"
+#include "helpers.h"
 #include "package_manager/ostreemanager.h"
 #include "primary/sotauptaneclient.h"
-#include "version.h"
 
 #include "utilities/aktualizr_version.h"
 
-- 
2.23.0

